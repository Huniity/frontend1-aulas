<!-- https://codepen.io/shvvffle/pen/JRrLqG
https://sweetalert2.github.io/#usage -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">
    <title>Signin - Padel Social Club</title>
    <link rel="stylesheet" href="./styles/homepage.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script> <!-- Include SweetAlert2 -->
</head>

<body>
<shared-navbar></shared-navbar>
    <div class="container">
        <main class="feed">
            <shared-top-menu></shared-top-menu>
            <hr>
            <div class="signup-box">
                <h2>MY ACCOUNT</h2>
                <div class="users-container"></div>
            </div>
        </main>
    </div>
<shared-footer></shared-footer>
<script src="./scripts/users_module.js" type="module" defer></script>
<script src="scripts/shared_components.js" defer></script>
<script>
    const signedInUser = JSON.parse(localStorage.getItem("signedInUser"));
    if (!signedInUser) {
        Swal.fire({
            icon: 'info',
            title: 'Oh no...',
            text: 'You need to sign in first!',
            footer: '<a href="./signin.html" style="color: white; text-decoration: underline">Sign in</a> or <a href="./signup.html" style="color: white;  text-decoration: underline">Sign up</a>',
            width: "600px",
            theme: "dark",
            confirmButtonText: '<a href="./homepage.html" style="color: #181818; font-family: Anton"> Back to Homepage</a>',
            confirmButtonColor: '#f1c40f',
            allowOutsideClick: false,
            allowEscapeKey: false,
        });
    } else {
        const usersContainer = document.querySelector('.users-container');
        usersContainer.innerHTML = `
            <div class="user-card">
                <img src="${signedInUser.avatar}" alt="${signedInUser.username}" class="user-avatar">
                <h2>${signedInUser.f_name} ${signedInUser.l_name}</h2>
                <p>Username: ${signedInUser.username}</p>
                <p>Email: ${signedInUser.email}</p>
                <p>Main Hand: ${signedInUser.main_hand}</p>
                <div class="skills">
                    Tags:
                    <ul>
                        ${signedInUser.tags.map(tag => `<li>${tag}</li>`).join("")}
                    </ul>
                </div>
                <div class="communities">
                    Groups: 
                    <ul>
                        ${signedInUser.groups.map(group => `<li>${group}</li>`).join("")}
                    </ul>
                </div>
                <p>Joined: ${new Date(signedInUser.created_at).toLocaleDateString()}</p>
            </div>
        `;
    }
</script>
</body>
</html>